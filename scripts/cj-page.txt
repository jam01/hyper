# #############################
# i-hyper test cases
# @mamund - 2021-06
# #############################

# supports setting runtime config values
CONFIG-SET {"accept":"application/json,","profile":"profiles.example.org/user"}
CONFIG-SET {"encoding":"application/x-www-form-urlencoded"}
CONFIG-SET {"test":"http://something.com"}

# simple request and then JSONPath
ACTIVATE http://rwcbook14.herokuapp.com/task/
# DISPLAY PATH $..items[*].href

# strong-typed response-handling (Collection+JSON) w/ JSONPath
DISPLAY-CJ PATH $.collection.title
DISPLAY-CJ PATH $.collection.version
DISPLAY-CJ PATH $.collection.href
DISPLAY-CJ PATH $.collection.content
DISPLAY-CJ PATH $..items[*].href
DISPLAY-CJ PATH $..links.*[?(@property==='rel'&&@.match(/edit-form/i))]^

# default objects/collections for DISPLAY-CJ
# DISPLAY-CJ LINKS
# DISPLAY-CJ ITEMS
# DISPLAY-CJ QUERIES
# DISPLAY-CJ TEMPLATE

# weak-typed response-handling (including JSONPath)
# DISPLAY STATUS
# DISPLAY URL
# DISPLAY HEADERS
# DISPLAY 0
# DISPLAY PATH $..items[*].href

# supports simple queries
# ACTIVATE http://localhost:8181/task/

# supports using config defaults for accepts and link profile headers
# ACTIVATE http://localhost:8181/task/?completeFlag=false WITH-FORMAT WITH-PROFILE $$test

# supports custom headers w/ GET
# ACTIVATE http://rwcbook14.herokuapp.com/task/rmqzgqfq3d WITH-HEADERS {"accept":"application/vnd.collection+json","profile":"<http://profiles.alps.com/person>"}

# supports query strings as expected
# ACTIVATE http://rwcbook14.herokuapp.com/task/?completeFlag=false WITH-HEADERS {"accept":"application/json","profile":"<http://profiles.alps.com/person>"}

# supports http methods
# ACTIVATE http://localhost:8181/task/1x53zs7cv6m WITH-METHOD DELETE

# supports body, method, & encoding
# ACTIVATE http://localhost:8181/task/ WITH-BODY {"title":"testing","tags":"hyper","completeFlag":"false"} WITH-METHOD POST WITH-ENCODING application/json

# supports default POST w/ form-urlencoded
# ACTIVATE http://localhost:8181/task/ WITH-BODY title=testing&tags=hyper&completeFlag=false WITH-METHOD POST

# supports use of headers for PUT-As-Create
# ACTIVATE http://localhost:8181/task/ufa3susc3 WITH-BODY title=created&completeFlag=false WITH-METHOD PUT WITH-HEADERS {"if-none-match":"*"}

# or use the special i-hyper method shortcut for "put-create" action
# ACTIVATE http://localhost:8181/task/ufa3susc3 WITH-BODY title=created&completeFlag=false WITH-METHOD PUT-C

# support simple update w/ put
# ACTIVATE http://localhost:8181/task/ufa3susc3 WITH-BODY title=testing&completeFlag=false WITH-METHOD PUT

# supports PUT updates w/ ETag checking
# ACTIVATE http://localhost:8181/task/ufa3susc3 WITH-METHOD PUT WITH-BODY title=testing&tags=hyper&completeFlag=false WITH-HEADERS {"if-match":"1q2w3e4r5t6y"}

# EOF
